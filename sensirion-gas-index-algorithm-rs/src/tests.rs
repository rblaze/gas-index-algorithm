use super::sensirion_gas_index_algorithm::{AlgorithmType, GasIndexAlgorithm};

#[test]
fn test_voc_algorithm() {
    let mut alg = GasIndexAlgorithm::new(AlgorithmType::Voc);

    DATASET.iter().for_each(|(raw, res)| {
        let r = alg.process(*raw);
        match res {
            None => assert!(r.is_none()),
            Some(res) => assert!(r.is_some() && (res - 1..=res + 1).contains(&r.unwrap())),
        }
    });
}

#[test]
fn test_nox_algorithm() {
    let mut alg = GasIndexAlgorithm::new(AlgorithmType::Nox);
    let res = (0..200)
        .into_iter()
        .map(|_| alg.process(1337))
        .last()
        .flatten();

    assert_eq!(res, Some(1));
}

const DATASET: [(u16, Option<i32>); 600] = [
    (20019, None),
    (20004, None),
    (20013, None),
    (20001, None),
    (20001, None),
    (20046, None),
    (20016, None),
    (20035, None),
    (20034, None),
    (20009, None),
    (20027, None),
    (20015, None),
    (20029, None),
    (20039, None),
    (20048, None),
    (20046, None),
    (20001, None),
    (20007, None),
    (20033, None),
    (20046, None),
    (20027, None),
    (20015, None),
    (20025, None),
    (20012, None),
    (20038, None),
    (20026, None),
    (20019, None),
    (20045, None),
    (20037, None),
    (20015, None),
    (20038, None),
    (20044, None),
    (20022, None),
    (20030, None),
    (20032, None),
    (20017, None),
    (20025, None),
    (20047, None),
    (20031, None),
    (20048, None),
    (20012, None),
    (20045, None),
    (20025, None),
    (20015, None),
    (20047, None),
    (20004, None),
    (20005, Some(98)),
    (20005, Some(98)),
    (20037, Some(98)),
    (20001, Some(98)),
    (20031, Some(98)),
    (20043, Some(98)),
    (20026, Some(98)),
    (20031, Some(98)),
    (20028, Some(98)),
    (20047, Some(98)),
    (20014, Some(98)),
    (20006, Some(98)),
    (20032, Some(98)),
    (20008, Some(98)),
    (20007, Some(98)),
    (20023, Some(98)),
    (20028, Some(98)),
    (20005, Some(98)),
    (20036, Some(98)),
    (20033, Some(98)),
    (20030, Some(98)),
    (20034, Some(98)),
    (20009, Some(98)),
    (20014, Some(98)),
    (20005, Some(98)),
    (20012, Some(98)),
    (20028, Some(98)),
    (20024, Some(98)),
    (20049, Some(98)),
    (20007, Some(98)),
    (20042, Some(98)),
    (20024, Some(98)),
    (20043, Some(98)),
    (20004, Some(98)),
    (20045, Some(98)),
    (20021, Some(98)),
    (20007, Some(98)),
    (20048, Some(98)),
    (20040, Some(98)),
    (20018, Some(98)),
    (20040, Some(98)),
    (20033, Some(98)),
    (20035, Some(98)),
    (20045, Some(98)),
    (20045, Some(98)),
    (20027, Some(98)),
    (20023, Some(98)),
    (20024, Some(98)),
    (20042, Some(98)),
    (20049, Some(98)),
    (20043, Some(98)),
    (20003, Some(98)),
    (20009, Some(98)),
    (20016, Some(98)),
    (20006, Some(98)),
    (20019, Some(98)),
    (20046, Some(98)),
    (20038, Some(98)),
    (20022, Some(98)),
    (20011, Some(98)),
    (20015, Some(98)),
    (20036, Some(98)),
    (20047, Some(98)),
    (20002, Some(98)),
    (20002, Some(98)),
    (20025, Some(98)),
    (20001, Some(98)),
    (20027, Some(98)),
    (20006, Some(98)),
    (20029, Some(98)),
    (20024, Some(98)),
    (20008, Some(98)),
    (20030, Some(98)),
    (20003, Some(98)),
    (20049, Some(98)),
    (20036, Some(98)),
    (20006, Some(98)),
    (20036, Some(98)),
    (20036, Some(98)),
    (20046, Some(98)),
    (20017, Some(98)),
    (20011, Some(98)),
    (20017, Some(98)),
    (20040, Some(98)),
    (20019, Some(98)),
    (20015, Some(98)),
    (20041, Some(98)),
    (20044, Some(98)),
    (20024, Some(98)),
    (20028, Some(98)),
    (20033, Some(98)),
    (20017, Some(98)),
    (20026, Some(98)),
    (20007, Some(98)),
    (20003, Some(98)),
    (20001, Some(98)),
    (20039, Some(98)),
    (20042, Some(98)),
    (20036, Some(98)),
    (20022, Some(98)),
    (20016, Some(98)),
    (20046, Some(98)),
    (20018, Some(98)),
    (20016, Some(98)),
    (20037, Some(98)),
    (20034, Some(98)),
    (20018, Some(98)),
    (20018, Some(98)),
    (20046, Some(98)),
    (20005, Some(98)),
    (20001, Some(98)),
    (20033, Some(98)),
    (20035, Some(98)),
    (20007, Some(98)),
    (20001, Some(98)),
    (20019, Some(98)),
    (20011, Some(98)),
    (20047, Some(98)),
    (20048, Some(98)),
    (20037, Some(98)),
    (20016, Some(98)),
    (20011, Some(98)),
    (20002, Some(98)),
    (20047, Some(98)),
    (20007, Some(98)),
    (20032, Some(98)),
    (20049, Some(98)),
    (20039, Some(98)),
    (20004, Some(98)),
    (20036, Some(98)),
    (20012, Some(98)),
    (20016, Some(98)),
    (20032, Some(98)),
    (20042, Some(98)),
    (20004, Some(98)),
    (20012, Some(98)),
    (20023, Some(98)),
    (20046, Some(98)),
    (20009, Some(98)),
    (20018, Some(98)),
    (20038, Some(98)),
    (20019, Some(98)),
    (20044, Some(98)),
    (20006, Some(98)),
    (20009, Some(98)),
    (20041, Some(98)),
    (20026, Some(98)),
    (20010, Some(98)),
    (20025, Some(98)),
    (20039, Some(98)),
    (20024, Some(98)),
    (20013, Some(99)),
    (20026, Some(99)),
    (20021, Some(99)),
    (17031, Some(99)),
    (17027, Some(99)),
    (17045, Some(99)),
    (17024, Some(99)),
    (17031, Some(99)),
    (17010, Some(99)),
    (17031, Some(99)),
    (17022, Some(99)),
    (17006, Some(99)),
    (17039, Some(99)),
    (17048, Some(99)),
    (17049, Some(99)),
    (17032, Some(99)),
    (17043, Some(99)),
    (17040, Some(99)),
    (17037, Some(99)),
    (17008, Some(99)),
    (17020, Some(99)),
    (17007, Some(99)),
    (17049, Some(99)),
    (17035, Some(99)),
    (17008, Some(99)),
    (17005, Some(99)),
    (17045, Some(99)),
    (17044, Some(99)),
    (17039, Some(99)),
    (17044, Some(99)),
    (17036, Some(99)),
    (17013, Some(99)),
    (17021, Some(100)),
    (17043, Some(100)),
    (17030, Some(100)),
    (17047, Some(100)),
    (17033, Some(100)),
    (17035, Some(100)),
    (17026, Some(100)),
    (17025, Some(100)),
    (17039, Some(100)),
    (17045, Some(100)),
    (17014, Some(100)),
    (17001, Some(100)),
    (17029, Some(100)),
    (17043, Some(100)),
    (17032, Some(100)),
    (17012, Some(100)),
    (17010, Some(100)),
    (17008, Some(100)),
    (17003, Some(100)),
    (17041, Some(100)),
    (17028, Some(100)),
    (17029, Some(100)),
    (17043, Some(100)),
    (17010, Some(100)),
    (17043, Some(100)),
    (17022, Some(100)),
    (17018, Some(100)),
    (17029, Some(100)),
    (17026, Some(100)),
    (17028, Some(100)),
    (17024, Some(100)),
    (17020, Some(100)),
    (17048, Some(100)),
    (17046, Some(100)),
    (17011, Some(100)),
    (17044, Some(100)),
    (17035, Some(100)),
    (17038, Some(100)),
    (17016, Some(100)),
    (17043, Some(100)),
    (17040, Some(100)),
    (17010, Some(100)),
    (17046, Some(100)),
    (17004, Some(100)),
    (17040, Some(100)),
    (17003, Some(100)),
    (17024, Some(100)),
    (17010, Some(100)),
    (17035, Some(100)),
    (17021, Some(100)),
    (17013, Some(100)),
    (17013, Some(100)),
    (17047, Some(100)),
    (17010, Some(100)),
    (17005, Some(100)),
    (17049, Some(100)),
    (17034, Some(100)),
    (17018, Some(100)),
    (17005, Some(100)),
    (17045, Some(100)),
    (17044, Some(100)),
    (17018, Some(100)),
    (17020, Some(100)),
    (17004, Some(100)),
    (17036, Some(100)),
    (17034, Some(100)),
    (17013, Some(100)),
    (17033, Some(100)),
    (17035, Some(100)),
    (17031, Some(100)),
    (17023, Some(100)),
    (17006, Some(100)),
    (17041, Some(100)),
    (17016, Some(100)),
    (17019, Some(100)),
    (17039, Some(100)),
    (17015, Some(100)),
    (17013, Some(100)),
    (17014, Some(100)),
    (17018, Some(100)),
    (17002, Some(100)),
    (17036, Some(100)),
    (17034, Some(100)),
    (17033, Some(100)),
    (17047, Some(100)),
    (17009, Some(100)),
    (17020, Some(100)),
    (17016, Some(100)),
    (17003, Some(100)),
    (17009, Some(100)),
    (17010, Some(100)),
    (17034, Some(100)),
    (17001, Some(100)),
    (17042, Some(100)),
    (17024, Some(100)),
    (17038, Some(100)),
    (17010, Some(100)),
    (17036, Some(100)),
    (17014, Some(100)),
    (17020, Some(100)),
    (17019, Some(100)),
    (17048, Some(100)),
    (17036, Some(100)),
    (17047, Some(100)),
    (17024, Some(100)),
    (17047, Some(100)),
    (17048, Some(100)),
    (17037, Some(100)),
    (17006, Some(100)),
    (17031, Some(100)),
    (17040, Some(100)),
    (17024, Some(100)),
    (17035, Some(100)),
    (17048, Some(100)),
    (17037, Some(100)),
    (17020, Some(100)),
    (17002, Some(100)),
    (17018, Some(100)),
    (17008, Some(100)),
    (17041, Some(100)),
    (17048, Some(100)),
    (17024, Some(100)),
    (17029, Some(100)),
    (17014, Some(100)),
    (17020, Some(100)),
    (17039, Some(100)),
    (17018, Some(100)),
    (17039, Some(100)),
    (17040, Some(100)),
    (17035, Some(100)),
    (17038, Some(100)),
    (17036, Some(100)),
    (17018, Some(100)),
    (17023, Some(100)),
    (17017, Some(100)),
    (17036, Some(100)),
    (17024, Some(100)),
    (17016, Some(100)),
    (17029, Some(100)),
    (17047, Some(100)),
    (17020, Some(100)),
    (17025, Some(100)),
    (17034, Some(100)),
    (17007, Some(100)),
    (17007, Some(100)),
    (17020, Some(100)),
    (17038, Some(100)),
    (17047, Some(100)),
    (17001, Some(100)),
    (17024, Some(100)),
    (17006, Some(100)),
    (17037, Some(100)),
    (17035, Some(100)),
    (17021, Some(100)),
    (17041, Some(100)),
    (17038, Some(100)),
    (17042, Some(100)),
    (17018, Some(100)),
    (17016, Some(100)),
    (17046, Some(100)),
    (17033, Some(100)),
    (17014, Some(100)),
    (17049, Some(100)),
    (17027, Some(100)),
    (17032, Some(100)),
    (17045, Some(100)),
    (17040, Some(100)),
    (17002, Some(100)),
    (17045, Some(100)),
    (17021, Some(100)),
    (17014, Some(100)),
    (20021, Some(100)),
    (20027, Some(100)),
    (20039, Some(100)),
    (20011, Some(100)),
    (20026, Some(100)),
    (20010, Some(100)),
    (20009, Some(100)),
    (20002, Some(100)),
    (20047, Some(100)),
    (20030, Some(100)),
    (20037, Some(100)),
    (20040, Some(100)),
    (20013, Some(100)),
    (20049, Some(100)),
    (20003, Some(100)),
    (20041, Some(100)),
    (20017, Some(100)),
    (20038, Some(100)),
    (20003, Some(100)),
    (20045, Some(100)),
    (20031, Some(100)),
    (20027, Some(100)),
    (20049, Some(99)),
    (20033, Some(99)),
    (20047, Some(99)),
    (20017, Some(99)),
    (20026, Some(99)),
    (20044, Some(99)),
    (20042, Some(99)),
    (20011, Some(99)),
    (20014, Some(99)),
    (20022, Some(99)),
    (20036, Some(99)),
    (20032, Some(99)),
    (20013, Some(99)),
    (20010, Some(99)),
    (20037, Some(99)),
    (20035, Some(99)),
    (20009, Some(99)),
    (20006, Some(99)),
    (20033, Some(99)),
    (20037, Some(99)),
    (20039, Some(99)),
    (20025, Some(99)),
    (20046, Some(99)),
    (20001, Some(99)),
    (20040, Some(99)),
    (20049, Some(99)),
    (20029, Some(99)),
    (20040, Some(99)),
    (20026, Some(99)),
    (20013, Some(99)),
    (20021, Some(99)),
    (20014, Some(99)),
    (20049, Some(99)),
    (20018, Some(99)),
    (20003, Some(99)),
    (20010, Some(99)),
    (20007, Some(99)),
    (20021, Some(99)),
    (20017, Some(99)),
    (20047, Some(99)),
    (20040, Some(99)),
    (20023, Some(99)),
    (20031, Some(99)),
    (20042, Some(99)),
    (20007, Some(99)),
    (20046, Some(99)),
    (20043, Some(99)),
    (20013, Some(99)),
    (20024, Some(99)),
    (20023, Some(99)),
    (20022, Some(99)),
    (20004, Some(99)),
    (20042, Some(99)),
    (20046, Some(99)),
    (20042, Some(99)),
    (20042, Some(99)),
    (20004, Some(99)),
    (20023, Some(99)),
    (20044, Some(99)),
    (20047, Some(99)),
    (20034, Some(99)),
    (20005, Some(99)),
    (20005, Some(99)),
    (20002, Some(99)),
    (20016, Some(99)),
    (20003, Some(99)),
    (20035, Some(99)),
    (20045, Some(99)),
    (20036, Some(99)),
    (20038, Some(99)),
    (20016, Some(99)),
    (20003, Some(99)),
    (20019, Some(99)),
    (20040, Some(99)),
    (20047, Some(99)),
    (20006, Some(99)),
    (20032, Some(99)),
    (20048, Some(99)),
    (20027, Some(99)),
    (20007, Some(99)),
    (20030, Some(99)),
    (20003, Some(100)),
    (20028, Some(100)),
    (20022, Some(100)),
    (20001, Some(100)),
    (20038, Some(100)),
    (20026, Some(100)),
    (20049, Some(100)),
    (20047, Some(99)),
    (20046, Some(99)),
    (20020, Some(99)),
    (20029, Some(99)),
    (20002, Some(100)),
    (20030, Some(100)),
    (20026, Some(100)),
    (20026, Some(100)),
    (20026, Some(100)),
    (20030, Some(100)),
    (20006, Some(100)),
    (20008, Some(100)),
    (20032, Some(100)),
    (20031, Some(100)),
    (20021, Some(100)),
    (20048, Some(100)),
    (20030, Some(100)),
    (20004, Some(100)),
    (20047, Some(100)),
    (20002, Some(100)),
    (20012, Some(100)),
    (20043, Some(100)),
    (20011, Some(100)),
    (20043, Some(100)),
    (20038, Some(100)),
    (20034, Some(100)),
    (20028, Some(100)),
    (20033, Some(100)),
    (20026, Some(100)),
    (20020, Some(100)),
    (20006, Some(100)),
    (20038, Some(100)),
    (20028, Some(100)),
    (20016, Some(100)),
    (20030, Some(100)),
    (20013, Some(100)),
    (20042, Some(100)),
    (20010, Some(100)),
    (20015, Some(100)),
    (20002, Some(100)),
    (20041, Some(100)),
    (20049, Some(100)),
    (20013, Some(100)),
    (20025, Some(100)),
    (20041, Some(100)),
    (20032, Some(100)),
    (20002, Some(100)),
    (20044, Some(100)),
    (20002, Some(100)),
    (20033, Some(100)),
    (20010, Some(100)),
    (20021, Some(100)),
    (20006, Some(100)),
    (20045, Some(100)),
    (20043, Some(100)),
    (20033, Some(100)),
    (20008, Some(100)),
    (20032, Some(100)),
    (20017, Some(100)),
    (20010, Some(100)),
    (20032, Some(100)),
    (20034, Some(100)),
    (20044, Some(100)),
    (20040, Some(100)),
    (20022, Some(100)),
    (20017, Some(100)),
    (20029, Some(100)),
    (20030, Some(100)),
    (20003, Some(100)),
    (20044, Some(100)),
    (20026, Some(100)),
    (20017, Some(100)),
    (20043, Some(100)),
    (20012, Some(100)),
    (20031, Some(100)),
    (20035, Some(100)),
    (20013, Some(100)),
    (20028, Some(100)),
    (20047, Some(100)),
    (20033, Some(100)),
    (20008, Some(100)),
    (20039, Some(100)),
    (20036, Some(100)),
    (20007, Some(100)),
    (20044, Some(100)),
    (20024, Some(100)),
    (20019, Some(100)),
    (20015, Some(100)),
    (20007, Some(100)),
    (20012, Some(100)),
];
